{% if perms.bookshelf.can_create %}
    <a href="{% url 'add_book' %}">Add New Book</a>
{% endif %}

{% for book in books %}
    <li>
        {{ book.title }} ({{ book.author }}, {{ book.publication_year }})
        {% if perms.bookshelf.can_edit %}
            <a href="{% url 'edit_book' book.id %}">Edit</a>
        {% endif %}
        {% if perms.bookshelf.can_delete %}
            <a href="{% url 'delete_book' book.id %}">Delete</a>
        {% endif %}
    </li>
{% endfor %}

<form method="get" action="{% url 'book_list' %}">
    <input type="text" name="q" value="{{ query }}" placeholder="Search books">
    {% csrf_token %}
    <button type="submit">Search</button>
</form>
